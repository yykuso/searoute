async function populateTable(e,t){try{const n=await fetch(e),a=await n.json(),o=document.querySelector(t);Object.keys(a).forEach(e=>{const{businessName:t,routeName:n,info:r,shipName:l,note:s,url:c}=a[e],d=document.createElement("tr");"season"===s?d.classList.add("season-row"):"suspend"===s&&d.classList.add("suspend-row"),[e,t,n,r,l].forEach(e=>{const t=document.createElement("td");t.textContent=e||"-",d.appendChild(t)});const i=document.createElement("td");if(c){const e=document.createElement("a");e.href=c,e.textContent="リンク",e.target="_blank",i.appendChild(e)}else i.textContent="-";d.appendChild(i),o.appendChild(d)})}catch(e){console.error("データの読み込みに失敗しました:",e)}}document.addEventListener("DOMContentLoaded",()=>{populateTable("./data/seaRouteDetails.json",".sea-route-table tbody"),populateTable("./data/internationalSeaRouteDetails.json",".international-sea-route-table tbody"),populateTable("./data/seaRouteKRDetails.json",".sea-route-KR-table tbody")}),document.getElementById("searchbutton").addEventListener("click",function(){const e=document.getElementById("searchbox").value.toLowerCase(),t=document.getElementById("search-message");if(!e)return void(t.textContent="");const n=document.querySelectorAll("table tbody tr");let a=!1;n.forEach(e=>{e.style.display=""}),n.forEach(t=>{const n=t.querySelectorAll("td");let o=!1;n.forEach(t=>{const n=t.textContent.toLowerCase(),a=t.getAttribute("data-original-text");if(a&&(t.innerHTML=a,t.removeAttribute("data-original-text")),n.includes(e)){o=!0,t.getAttribute("data-original-text")||t.setAttribute("data-original-text",t.innerHTML);const n=new RegExp(`(${e})`,"gi");t.innerHTML=t.innerHTML.replace(n,'<span style="background-color: #ffe46f;">$1</span>')}}),o?a=!0:t.style.display="none"}),t.textContent=a?"":"見つかりませんでした。"}),document.getElementById("resetbutton").addEventListener("click",function(){const e=document.querySelectorAll("table tbody tr"),t=document.getElementById("search-message");document.getElementById("searchbox").value="",e.forEach(e=>{e.style.display="";e.querySelectorAll("td").forEach(e=>{const t=e.getAttribute("data-original-text");t&&(e.innerHTML=t,e.removeAttribute("data-original-text"))})}),t.textContent=""});