async function populateTable(e,t){try{const n=await fetch(e),o=await n.json(),a=document.querySelector(t);Object.keys(o).forEach(e=>{const{businessName:t,routeName:n,information:r,note:l,url:s}=o[e],c=document.createElement("tr");"season"===l?c.classList.add("season-row"):"suspend"===l&&c.classList.add("suspend-row"),[e,t,n,r].forEach(e=>{const t=document.createElement("td");t.textContent=e||"-",c.appendChild(t)});const d=document.createElement("td");if(s){const e=document.createElement("a");e.href=s,e.textContent="リンク",e.target="_blank",d.appendChild(e)}else d.textContent="-";c.appendChild(d),a.appendChild(c)})}catch(e){console.error("データの読み込みに失敗しました:",e)}}document.addEventListener("DOMContentLoaded",()=>{populateTable("./data/seaRouteDetails.json",".sea-route-table tbody"),populateTable("./data/internationalSeaRouteDetails.json",".international-sea-route-table tbody")}),document.getElementById("searchbutton").addEventListener("click",function(){const e=document.getElementById("searchbox").value.toLowerCase(),t=document.getElementById("search-message");if(!e)return void(t.textContent="");const n=document.querySelectorAll("table tbody tr");let o=!1;n.forEach(e=>{e.style.display=""}),n.forEach(t=>{const n=t.querySelectorAll("td");let a=!1;n.forEach(t=>{const n=t.textContent.toLowerCase(),o=t.getAttribute("data-original-text");if(o&&(t.innerHTML=o,t.removeAttribute("data-original-text")),n.includes(e)){a=!0,t.getAttribute("data-original-text")||t.setAttribute("data-original-text",t.innerHTML);const n=new RegExp(`(${e})`,"gi");t.innerHTML=t.innerHTML.replace(n,'<span style="background-color: #ffe46f;">$1</span>')}}),a?o=!0:t.style.display="none"}),t.textContent=o?"":"見つかりませんでした。"}),document.getElementById("resetbutton").addEventListener("click",function(){const e=document.querySelectorAll("table tbody tr"),t=document.getElementById("search-message");document.getElementById("searchbox").value="",e.forEach(e=>{e.style.display="";e.querySelectorAll("td").forEach(e=>{const t=e.getAttribute("data-original-text");t&&(e.innerHTML=t,e.removeAttribute("data-original-text"))})}),t.textContent=""});